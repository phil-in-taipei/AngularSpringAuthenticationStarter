"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_app_authenticated-user_authenticated-user_module_ts"],{4864:(N,v,n)=>{n.r(v),n.d(v,{AuthenticatedUserModule:()=>j});var f=n(1368),w=n(4716),u=n(1485),c=n(1824),p=n(5884),s=n(7336),e=n(4496),h=n(3732);let _=(()=>{class t{constructor(r){this.authService=r}onLogout(){this.authService.logout()}static#e=this.\u0275fac=function(o){return new(o||t)(e.GI1(h.o))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-authenticated-footer"]],decls:23,vars:0,consts:[[1,"mt-5"],[1,"bg-dark","text-center","text-lg-start"],[1,"container","p-4","pb-0"],[1,""],[1,"row"],[1,"col-md-3","col-lg-3","col-xl-3","mx-auto","mt-3"],[1,"text-uppercase","mb-4","font-weight-bold"],[1,"w-100","clearfix","d-md-none"],[1,"col-md-2","col-lg-2","col-xl-2","mx-auto","mt-3"],["routerLink","/authenticated-user/user-profile","href","#"],["href","#",3,"click"],[1,"col-md-3","col-lg-2","col-xl-2","mx-auto","mt-3"],[1,"my-3"]],template:function(o,i){1&o&&(e.I0R(0,"div",0)(1,"footer",1)(2,"div",2)(3,"section",3)(4,"div",4)(5,"div",5)(6,"h6",6),e.OEk(7," Angular Spring Boot "),e.C$Y(),e.I0R(8,"p"),e.OEk(9,"This is boilerplate for Angular and Spring Boot"),e.C$Y()(),e.wR5(10,"hr",7),e.I0R(11,"div",8)(12,"h6",6),e.OEk(13,"Angular SpringBoot Boilerplate"),e.C$Y(),e.I0R(14,"p")(15,"a",9),e.OEk(16,"Profile"),e.C$Y()(),e.I0R(17,"p")(18,"a",10),e.qCj("click",function(){return i.onLogout()}),e.OEk(19,"Logout"),e.C$Y()()(),e.wR5(20,"hr",7)(21,"div",11),e.C$Y()(),e.wR5(22,"hr",12),e.C$Y()()())},dependencies:[p.ER]})}return t})(),k=(()=>{class t{constructor(r){this.authService=r}onLogout(){this.authService.logout()}static#e=this.\u0275fac=function(o){return new(o||t)(e.GI1(h.o))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-authenticated-header"]],decls:12,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],["routerLink","user-profile","href","#",1,"nav-link"],["href","#",1,"nav-link",3,"click"]],template:function(o,i){1&o&&(e.I0R(0,"nav",0)(1,"div",1)(2,"button",2),e.wR5(3,"span",3),e.C$Y(),e.I0R(4,"div",4)(5,"ul",5)(6,"li")(7,"a",6),e.OEk(8,"Profile"),e.C$Y()(),e.I0R(9,"li")(10,"a",7),e.qCj("click",function(){return i.onLogout()}),e.OEk(11,"Logout"),e.C$Y()()()()()())},dependencies:[p.ER],styles:[".navbar-brand[_ngcontent-%COMP%]{color:#758d97!important}.navbar-dark[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#333}.navbar-dark[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%] > .open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{background-color:#000!important;color:#758d97}.navbar-dark[_ngcontent-%COMP%]   .navbar-nav[_ngcontent-%COMP%] > .open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#004483}.dropdown-menu[_ngcontent-%COMP%]{font-size:1em;color:#758d97}.dropdown-item[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#004483}.dropdown-menu[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#758d97}.mydropnav[_ngcontent-%COMP%]{color:#758d97}"]})}return t})(),E=(()=>{class t{constructor(r){this.store=r}ngOnInit(){console.log("initializing the authenticated user component now..."),this.store.dispatch(new s.Qd)}static#e=this.\u0275fac=function(o){return new(o||t)(e.GI1(c.m_))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-authenticated-user"]],decls:5,vars:0,consts:[[1,"container","content"],[1,"color-frame","rounded"]],template:function(o,i){1&o&&(e.wR5(0,"app-authenticated-header"),e.I0R(1,"div",0)(2,"div",1),e.wR5(3,"router-outlet"),e.C$Y()(),e.wR5(4,"app-authenticated-footer"))},dependencies:[p.cP,_,k]})}return t})();const m=(0,c.GK)("user"),C=(0,c.M3)(m,t=>t.usrProfile),R=(0,c.M3)(m,t=>t.errorMessage),$=(0,c.M3)(m,t=>t.successMessage);let U=(()=>{class t{constructor(r){this.store=r,this.closeEvent=new e._w7}onSubmitEditedProfile(r){if(r.invalid)return this.store.dispatch(new s.OI({err:{error:{message:"The form values were not properly filled in!"}}})),r.reset(),void this.closeEvent.emit(!1);this.store.dispatch(new s.uk({submissionForm:{email:r.value.contact_email,givenName:r.value.given_name,surname:r.value.surname}})),r.resetForm(),this.closeEvent.emit(!1)}static#e=this.\u0275fac=function(o){return new(o||t)(e.GI1(c.m_))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-edit-profile-form"]],inputs:{profile:"profile"},outputs:{closeEvent:"closeEvent"},decls:2,vars:0,template:function(o,i){1&o&&(e.I0R(0,"p"),e.OEk(1,"edit-profile-form works!"),e.C$Y())}})}return t})();function S(t,a){if(1&t){const r=e.KQA();e.I0R(0,"div")(1,"div",10)(2,"h4",11),e.OEk(3),e.C$Y(),e.I0R(4,"button",12),e.qCj("click",function(){e.usT(r);const i=e.GaO(2);return e.CGJ(i.onClearStatusMsgs())}),e.C$Y()()()}if(2&t){const r=a.ngIf;e.yG2(3),e.cNF(r)}}function F(t,a){if(1&t){const r=e.KQA();e.I0R(0,"div")(1,"div",13)(2,"h6"),e.OEk(3),e.C$Y(),e.I0R(4,"button",12),e.qCj("click",function(){e.usT(r);const i=e.GaO(2);return e.CGJ(i.onClearStatusMsgs())}),e.C$Y()()()}if(2&t){const r=a.ngIf;e.yG2(3),e.cNF(r)}}function x(t,a){if(1&t){const r=e.KQA();e.I0R(0,"div",1),e.yuY(1,S,5,1,"div",2),e.wVc(2,"async"),e.yuY(3,F,5,1,"div",2),e.wVc(4,"async"),e.I0R(5,"div",3)(6,"div",4)(7,"h1"),e.OEk(8),e.wVc(9,"uppercase"),e.C$Y()(),e.wR5(10,"hr"),e.I0R(11,"table",5)(12,"tr")(13,"th")(14,"h3"),e.OEk(15,"Name"),e.C$Y()(),e.I0R(16,"td")(17,"h3"),e.OEk(18),e.C$Y()()(),e.I0R(19,"tr")(20,"th")(21,"h3"),e.OEk(22,"Email"),e.C$Y()(),e.I0R(23,"td")(24,"h3"),e.OEk(25),e.C$Y()()()(),e.wR5(26,"hr"),e.I0R(27,"div",6)(28,"button",7),e.qCj("click",function(){e.usT(r);const i=e.GaO();return e.CGJ(i.toggleForm())}),e.OEk(29),e.C$Y()(),e.wR5(30,"hr"),e.I0R(31,"div",8)(32,"app-edit-profile-form",9),e.qCj("closeEvent",function(i){e.usT(r);const d=e.GaO();return e.CGJ(d.closeFormHander(i))}),e.C$Y()(),e.wR5(33,"br"),e.C$Y()()}if(2&t){const r=a.ngIf,o=e.GaO();e.yG2(),e.E7m("ngIf",e.kDX(2,10,o.userProfileSubmitErrMsg$)),e.yG2(2),e.E7m("ngIf",e.kDX(4,12,o.userProfileSubmitSuccessMsg$)),e.yG2(5),e.CAO("Profile of: ",e.kDX(9,14,r.username[0]),"",r.username.substring(1),""),e.yG2(10),e.CAO(" ",r.givenName," ",r.surname," "),e.yG2(7),e.cNF(r.email),e.yG2(4),e.oRS(" ",o.showForm?"No thanks, I'll Edit My Profile Later":"Edit Profile"," "),e.yG2(2),e.E7m("hidden",!o.showForm),e.yG2(),e.E7m("profile",r)}}const G=[{path:"",component:E,children:[{path:"user-profile",component:(()=>{class t{constructor(r){this.store=r,this.showForm=!1}ngOnInit(){this.store.dispatch(new s.gD),this.usrProfile$=this.store.pipe((0,c.Ml)(C)),this.userProfileSubmitErrMsg$=this.store.pipe((0,c.Ml)(R)),this.userProfileSubmitSuccessMsg$=this.store.pipe((0,c.Ml)($))}toggleForm(){this.showForm=!this.showForm}closeFormHander(r){this.showForm=r}onClearStatusMsgs(){this.store.dispatch(new s.gD)}static#e=this.\u0275fac=function(o){return new(o||t)(e.GI1(c.m_))};static#t=this.\u0275cmp=e.In1({type:t,selectors:[["app-user-profile"]],decls:3,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngIf"],[1,"table-responsive"],[1,"container","mt-1","pt-1"],[1,"profile-table",2,"width","100%"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[3,"hidden"],[3,"profile","closeEvent"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"text-danger"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-secondary","alert-dismissible","fade","show"]],template:function(o,i){1&o&&(e.I0R(0,"div"),e.yuY(1,x,34,16,"div",0),e.wVc(2,"async"),e.C$Y()),2&o&&(e.yG2(),e.E7m("ngIf",e.kDX(2,1,i.usrProfile$)))},dependencies:[f.u_,U,f.a,f.yG],styles:["h1[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{border:1px solid #758d97;border-collapse:collapse}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-left:1px solid #758d97;border-right:1px solid #758d97;border-bottom:1pt solid #758d97;padding:1em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1em}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-left:1px solid #758d97;border-right:1px solid #758d97;padding:1em}hr.thick-or[_ngcontent-%COMP%]{border:2px solid #cb410b}hr.thin-white[_ngcontent-%COMP%]{border:1px solid white}"]})}return t})()}]}];let Y=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.a4G({type:t});static#r=this.\u0275inj=e.s3X({imports:[p.qQ.forChild(G),p.qQ]})}return t})();var P=n(2700),A=n(7872),T=n(6684),M=n(7400),b=n(4704),O=n(9144),g=n(7048),y=n(6716);let L=(()=>{class t{constructor(r,o){this.http=r,this.authService=o}fetchUserProfile(){console.log("fetching user profile ....");let r=this.authService.getAuthToken();return this.http.get(`${y.O.apiUrl}/api/user/authenticated`,{headers:new g.UD({Authorization:`Bearer ${r}`})})}editUserProfile(r){let o=this.authService.getAuthToken();return this.http.patch(`${y.O.apiUrl}/api/user/update`,r,{headers:new g.UD({Authorization:`Bearer ${o}`})})}static#e=this.\u0275fac=function(o){return new(o||t)(e.CoB(g.KK),e.CoB(h.o))};static#t=this.\u0275prov=e.wxM({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),B=(()=>{class t{constructor(r,o,i){this.actions$=r,this.userService=o,this.store=i,this.loadUserProfile$=(0,u.gv)(()=>this.actions$.pipe((0,u.y0)(s.e6.UserProfileRequested),(0,A.O)(this.store.pipe((0,c.Ml)(C))),(0,T.I)(([d,l])=>!l),(0,M.O)(d=>this.userService.fetchUserProfile().pipe((0,b.k)(l=>new s.IR({usrProfile:l})),(0,O.a)(l=>(this.store.dispatch(new s.eO({err:l})),(0,P.of)())))))),this.submitEditedProfile$=(0,u.gv)(()=>this.actions$.pipe((0,u.y0)(s.e6.UserProfileSubmitted),(0,M.O)(d=>this.userService.editUserProfile(d.payload.submissionForm).pipe((0,b.k)(l=>new s.e2({usrProfile:l})),(0,O.a)(l=>(this.store.dispatch(new s.OI({err:l})),(0,P.of)()))))))}static#e=this.\u0275fac=function(o){return new(o||t)(e.CoB(u.kp),e.CoB(L),e.CoB(c.m_))};static#t=this.\u0275prov=e.wxM({token:t,factory:t.\u0275fac})}return t})();const I={errorMessage:void 0,successMessage:void 0,userProfileLoaded:!1,usrProfile:void 0};function D(t=I,a){switch(a.type){case s.e6.UserProfileCleared:return I;case s.e6.UserProfileLoaded:return{errorMessage:void 0,successMessage:void 0,userProfileLoaded:!0,usrProfile:a.payload.usrProfile};case s.e6.UserProfileMessagesCleared:return{...t,successMessage:void 0,errorMessage:void 0};case s.e6.UserProfileRequestCancelled:console.log(a.payload);let r="Error retrieving user information!";return a.payload.err.error.message&&(r=a.payload.err.error.message),{...t,successMessage:void 0,errorMessage:r};case s.e6.UserProfileSaved:return{errorMessage:void 0,successMessage:"User Profile has been Sucessfully Updated!",userProfileLoaded:!0,usrProfile:a.payload.usrProfile};case s.e6.UserProfileSubmissionCancelled:console.log("error adding savings account!"),console.log(a.payload);let o="Error! Update Submission Failed!";return a.payload.err.error.message&&(o=a.payload.err.error.message),{...t,successMessage:void 0,errorMessage:o};default:return t}}let j=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.a4G({type:t});static#r=this.\u0275inj=e.s3X({imports:[f.MD,w.y,Y,c.cx.forFeature("user",D),u.Qh.forFeature([B])]})}return t})()}}]);